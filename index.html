// Klassen f√ºr jeden Tag (als Reihen organisiert)
async function selectDay(day) {
    selectedDay = day;
    document.getElementById('dayScreen').classList.add('hidden');
    
    // üîπ Tag sofort an n8n senden (w√§hrend WAIT l√§uft)
    sendDayToWebhook(day);

    // Klassen-Buttons erstellen
    const classButtons = document.getElementById('classButtons');
    classButtons.innerHTML = '';
    
    const classRows = classesPerDay[day];
    classRows.forEach(row => {
        const rowDiv = document.createElement('div');
        rowDiv.className = row.length === 1 ? 'class-row single' : 'class-row';
        
        row.forEach(className => {
            const button = document.createElement('button');
            button.className = 'btn-primary';
            button.textContent = className;
            button.onclick = () => selectClass(className);
            rowDiv.appendChild(button);
        });
        
        classButtons.appendChild(rowDiv);
    });
    
    document.getElementById('classSubtitle').textContent = `${day} - W√§hlen Sie die Klasse`;
    document.getElementById('classScreen').classList.remove('hidden');
}

// üîπ Neue Funktion: Tag an n8n senden
async function sendDayToWebhook(day) {
    const webhookUrl = 'https://n8n.autoprozessagentur.cloud/webhook-test/4309f290-7437-462c-8aa8-6319ae8106be';
    try {
        const response = await fetch(webhookUrl, {
            method: 'POST',
            headers: {
                'Content-Type': 'application/json'
            },
            body: JSON.stringify({
                day: day,
                timestamp: new Date().toISOString(),
                action: 'select_day'
            })
        });

        if (response.ok) {
            console.log(`‚úÖ Tag "${day}" erfolgreich an n8n gesendet.`);
        } else {
            console.error(`‚ùå Fehler beim Senden des Tages (${response.status})`);
        }
    } catch (error) {
        console.error('‚ö†Ô∏è Fehler beim Webhook-Aufruf:', error);
    }
}
